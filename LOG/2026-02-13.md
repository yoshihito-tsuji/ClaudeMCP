# 2026-02-13 作業ログ

## 実施事項

- README.md に独立開発方針を明記（上流リポジトリ参照禁止）
- 「実装予定」テーブルから上流リポジトリへの参照を削除
- Tapo C220 セットアップ手順を整理

## 判明事項

- 職場 Wi-Fi ではカメラ接続不可（ネットワーク制約の可能性）
- 自宅ネットワークでの接続テストが必要

## 自宅で実施すべきこと（TODO）

### 1. Tapo アプリ側（スマホ）

- [ ] Tapo C220 を自宅 2.4GHz Wi-Fi に接続
- [ ] カメラのローカルアカウントを作成（アプリ → カメラ → 歯車 → 高度な設定 → カメラのアカウント）
- [ ] サードパーティ連携を ON（「私」タブ → 音声アシスタント → サードパーティ連携）
- [ ] カメラの IP アドレスを確認（端末情報から）
- [ ] ルーターで DHCP 予約（IP 固定）を推奨

### 2. リポジトリ側（PC）

```bash
# Step 1: 依存関係インストール
cd wifi-cam-mcp && uv sync

# Step 2: .env 作成・編集
cp .env.example .env
# TAPO_CAMERA_HOST, TAPO_USERNAME, TAPO_PASSWORD を記入

# Step 3: サーバー起動テスト
uv run wifi-cam-mcp
```

### 3. MCP 設定（.mcp.json をリポジトリ直下に作成）

```json
{
  "mcpServers": {
    "wifi-cam": {
      "command": "uv",
      "args": ["run", "--directory", "/Users/yoshihitotsuji/Claude_Code/ClaudeMCP/wifi-cam-mcp", "wifi-cam-mcp"],
      "env": {
        "TAPO_CAMERA_HOST": "<カメラIP>",
        "TAPO_USERNAME": "<ローカルアカウント名>",
        "TAPO_PASSWORD": "<ローカルパスワード>"
      }
    }
  }
}
```

### 4. 動作確認（Claude Code 上で順に実行）

1. `camera_info` → 接続確認
2. `see` → 映像取得確認
3. `look_left` → 首振り確認
4. `look_right` → 復帰確認

### 5. 失敗時の切り分け

| 症状 | 確認 |
|------|------|
| タイムアウト | `ping <カメラIP>` で到達確認 |
| 認証エラー | ローカルアカウント（クラウドではない）の情報を再確認 |
| 操作拒否 | サードパーティ連携 ON を確認 |
